<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.spring.tour.mybatis.mapper.WishlistMapper">
  	<sql id="search">
  		<if test="field!=null and field!=''">
  			<if test="field=='both'">
  				where writer like '%'||'${keyword}'||'%' or content like '%'||'${keyword}'||'%'
  			</if>
  			<if test="field=='title'|| field=='content'">
  				where ${field} like '%'||'${keyword}'||'%'
  			</if>
  		</if>
  	</sql>
  	
  	<insert id="insert" parameterType="board">
  		insert into wishlist
 	</insert>
  	
 	<select id="list" parameterType="hashmap" resultType="board">
 		select * from 
		(
		    select aa.*, rownum rnum from
		    (
		        select * from gongi 
		        <include refid="search"/>
		        order by num desc
		    )aa
		<![CDATA[)where rnum >=#{startRow} and rnum <=#{endRow}]]>
 	</select>
  
 	
 	<delete id="delete" parameterType="int">
 		delete gongi where num = #{num}
 	</delete>
  </mapper>